<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Thêm vào giỏ</title>
</head>
<body>
<script>
const params = new URLSearchParams(window.location.search);

const product = {
  id: params.get("id"),
  name: decodeURIComponent(params.get("name")),
  price: Number(params.get("price")),
  quantity: Number(params.get("qty")) || 1,
  image: decodeURIComponent(params.get("image")) // decode link ảnh
};

if(product.id){
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const existing = cart.find(item => item.id === product.id);
  if(existing){
    existing.quantity += product.quantity;
  } else {
    cart.push(product);
  }
  localStorage.setItem("cart", JSON.stringify(cart));
  window.location.href = "cart.html";
}
</script>
  
</body>
</html>
