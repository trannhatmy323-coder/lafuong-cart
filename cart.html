<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Giỏ hàng</title>
<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  font-family: "Lora", serif;
  background:#faf9f7;
  color:#111;
  padding:20px;
}

/* EMPTY CART */
.cart-empty {
  min-height: 60vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.empty-box {
  text-align:center;
  max-width:420px;
  padding:40px;
}

.empty-title {
  font-size:22px;
  margin-bottom:12px;
}

.empty-sub {
  font-size:14px;
  color:#777;
  line-height:1.8;
  margin-bottom:32px;
}

.empty-btn {
  display:inline-block;
  padding:14px 36px;
  border:1px solid #111;
  border-radius:999px;
  font-size:12px;
  letter-spacing:1px;
  text-transform:uppercase;
  text-decoration:none;
  color:#111;
}
.empty-btn:hover {
  background:#111;
  color:#fff;
}

/* CART TABLE STYLE */
.cart-page { max-width:900px; margin:0 auto; display:none; }
.cart-title { font-size:26px; margin-bottom:30px; }

.cart-table {
  width:100%;
  border-collapse: collapse;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

.cart-table th, .cart-table td {
  padding:14px;
  text-align:center;
  border-bottom:1px solid #eee;
}

.cart-table th { font-weight:500; font-size:14px; }
.cart-table td img { width:80px; border-radius:8px; }

.qty { display:inline-flex; gap:8px; justify-content:center; align-items:center; }
.qty button { border:none; background:#eee; border-radius:6px; width:28px; height:28px; cursor:pointer; }
.qty input { width:50px; text-align:center; border:1px solid #ccc; border-radius:6px; }

.price, .total-price { font-size:15px; text-align:right; }

.remove-btn { padding:6px 12px; border:none; border-radius:6px; background:#dc3545; color:#fff; cursor:pointer; }

.cart-summary {
  margin-top:30px;
  padding-top:20px;
  border-top:1px solid #e5e5e5;
}
.cart-summary div {
  display:flex;
  justify-content:space-between;
  font-size:15px;
  margin-bottom:10px;
}
.cart-summary .total { font-size:18px; font-weight:500; }

.checkout {
  width:100%;
  margin-top:20px;
  padding:16px;
  border:none;
  border-radius:999px;
  background:#111;
  color:#fff;
  font-size:12px;
  letter-spacing:1px;
  text-transform:uppercase;
  cursor:pointer;
}
</style>
</head>
<body>

<!-- EMPTY CART -->
<div class="cart-empty" id="empty-cart">
  <div class="empty-box">
    <p class="empty-title">Giỏ hàng của bạn đang trống</p>
    <p class="empty-sub">Hãy khám phá thêm những chiếc entremet tinh tế, được làm thủ công mỗi ngày.</p>
    <a href="index.html" class="empty-btn">Khám phá bộ sưu tập</a>
  </div>
</div>

<!-- CART PAGE -->
<div class="cart-page" id="cart-page">
  <h1 class="cart-title">Giỏ hàng</h1>

  <table class="cart-table">
    <thead>
      <tr>
        <th>Ảnh</th>
        <th>Sản phẩm / Giá</th>
        <th>Số lượng</th>
        <th>Tổng giá</th>
        <th>Xóa</th>
      </tr>
    </thead>
    <tbody id="cart-items"></tbody>
  </table>

  <div class="cart-summary">
    <div><span>Tạm tính</span><span id="subtotal">0₫</span></div>
    <div class="total"><span>Tổng cộng</span><span id="grand-total">0₫</span></div>
    <button class="checkout">Tiến hành thanh toán</button>
  </div>
</div>

<script>
// Load giỏ hàng từ localStorage
function loadCart() {
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const cartPage = document.getElementById("cart-page");
  const emptyCart = document.getElementById("empty-cart");
  const tbody = document.getElementById("cart-items");
  tbody.innerHTML = "";

  if(cart.length === 0) {
    cartPage.style.display = "none";
    emptyCart.style.display = "flex";
    return;
  }

  cartPage.style.display = "block";
  emptyCart.style.display = "none";

  let grandTotal = 0;

  cart.forEach((item,index) => {
    const total = item.price * item.quantity;
    grandTotal += total;

    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><img src="${item.image}" alt="${item.name}"></td>
      <td>
        <div>${item.name}</div>
        <div class="price">${item.price.toLocaleString()}₫</div>
      </td>
      <td>
        <div class="qty">
          <button onclick="changeQty(${index},-1)">−</button>
          <input type="number" value="${item.quantity}" min="1" onchange="updateQty(${index},this.value)">
          <button onclick="changeQty(${index},1)">+</button>
        </div>
      </td>
      <td class="total-price">${total.toLocaleString()}₫</td>
      <td><button class="remove-btn" onclick="removeItem(${index})">Xóa</button></td>
    `;
    tbody.appendChild(tr);
  });

  document.getElementById("subtotal").innerText = grandTotal.toLocaleString()+"₫";
  document.getElementById("grand-total").innerText = grandTotal.toLocaleString()+"₫";
}

// Thay đổi số lượng
function changeQty(index,delta){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart[index].quantity += delta;
  if(cart[index].quantity < 1) cart[index].quantity = 1;
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

// Cập nhật số lượng từ input
function updateQty(index,value){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart[index].quantity = parseInt(value)||1;
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

// Xóa sản phẩm
function removeItem(index){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  cart.splice(index,1);
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

// Load khi mở trang
loadCart();
</script>

</body>
</html>

