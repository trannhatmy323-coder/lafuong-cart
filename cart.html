<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Giỏ hàng</title>
<link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500&display=swap" rel="stylesheet">
<style>
body {
  margin:0;
  font-family:"Lora", serif;
  background:#faf9f7;
  color:#111;
  padding:24px 16px;
  letter-spacing:0.2px;
}

/* EMPTY CART */
.cart-empty {
  min-height:60vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.empty-box {
  text-align:center;
  max-width:420px;
  padding:40px;
}
.empty-title {
  font-size:22px;
  margin-bottom:12px;
}
.empty-sub {
  font-size:14px;
  color:#777;
  line-height:1.8;
  margin-bottom:32px;
}
.empty-btn {
  display:inline-block;
  padding:14px 36px;
  border:1px solid #111;
  border-radius:999px;
  font-size:12px;
  letter-spacing:1px;
  text-transform:uppercase;
  text-decoration:none;
  color:#111;
}
.empty-btn:hover {
  background:#111;
  color:#fff;
}

/* CART PAGE */
.cart-page {
  max-width:900px;
  margin:0 auto;
  display:none;
}
.cart-title { font-size:26px; margin-bottom:30px; }

/* CART ITEM GRID */
.cart-item {
  display:grid;
  grid-template-columns:90px 1fr 110px 90px 70px;
  gap:14px;
  background:#fff;
  border-radius:8px;
  padding:20px;
  align-items:center;
  margin-bottom:20px;
  box-shadow:0 6px 20px rgba(0,0,0,0.04);
}

.cart-item img {
  width:80px;
  border-radius:6px;
}

.item-name {
  font-size:15px;
  font-weight:400;
  letter-spacing:0.3px;
}

.item-price {
  font-size:13px;
  color:#777;
  margin-top:6px;
}

.qty {
  display:inline-flex;
  gap:6px;
  justify-content:center;
  align-items:center;
}
.qty button {
  border:1px solid #ddd;
  background:transparent;
  border-radius:50%;
  width:26px;
  height:26px;
  font-size:14px;
}

.qty input {
  width:44px;
  border:1px solid #ddd;
  border-radius:6px;
  font-size:13px;
}

.total-price {
  font-size:14px;
  text-align:right;
  letter-spacing:0.3px;
}

.remove-btn {
  padding:6px 10px;
  border:1px solid #ddd;
  border-radius:999px;
  background:transparent;
  color:#777;
  font-size:11px;
  letter-spacing:1px;
  text-transform:uppercase;
}

.remove-btn:hover {
  border-color:#111;
  color:#111;
}
/* CART SUMMARY */
.cart-summary {
  margin-top:40px;
  padding-top:24px;
  border-top:1px solid #e5e5e5;
}

.cart-summary div {
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin-bottom:12px;
}

.cart-summary .total {
  font-size:18px;
  font-weight:400;
}

.checkout {
  width:100%;
  margin-top:28px;
  padding:18px;
  border:1px solid #111;
  border-radius:999px;
  background:#111;
  color:#fff;
  font-size:11px;
  letter-spacing:2px;
  text-transform:uppercase;
}

.checkout:hover {
  background:transparent;
  color:#111;
}

/* RESPONSIVE MOBILE */
@media(max-width:600px){
  .cart-item {
    grid-template-columns:80px 1fr;
    padding:16px;
  }

  .qty,
  .total-price,
  .remove-btn {
    grid-column:1/-1;
    text-align:center;
  }
}

</style>
</head>
<body>

<!-- EMPTY CART -->
<div class="cart-empty" id="empty-cart">
  <div class="empty-box">
    <p class="empty-title">Giỏ hàng của bạn đang trống</p>
    <p class="empty-sub">Hãy khám phá thêm những chiếc entremet tinh tế, được làm thủ công mỗi ngày.</p>
    <a href="index.html" class="empty-btn">Khám phá bộ sưu tập</a>
  </div>
</div>

<!-- CART PAGE -->
<div class="cart-page" id="cart-page">
  <h1 class="cart-title">Giỏ hàng</h1>
  <div id="cart-items"></div>

  <div class="cart-summary">
    <div><span>Tạm tính</span><span id="subtotal">0₫</span></div>
    <div class="total"><span>Tổng cộng</span><span id="grand-total">0₫</span></div>
    <button class="checkout">Tiến hành thanh toán</button>
  </div>
</div>

<script>
// Load giỏ hàng từ localStorage
function loadCart(){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const cartPage = document.getElementById("cart-page");
  const emptyCart = document.getElementById("empty-cart");
  const container = document.getElementById("cart-items");
  container.innerHTML="";

  if(cart.length===0){
    cartPage.style.display="none";
    emptyCart.style.display="flex";
    return;
  }

  cartPage.style.display="block";
  emptyCart.style.display="none";

  let grandTotal=0;

  cart.forEach((item,index)=>{
    const total=item.price*item.quantity;
    grandTotal+=total;

    const div=document.createElement("div");
    div.className="cart-item";
    div.innerHTML=`
      <div><img src="${item.image}" alt="${item.name}" style="width:80px;height:80px;object-fit:cover;border-radius:6px;"></div>
      <div>
        <div class="item-name">${item.name}</div>
        <div class="item-price">${item.price.toLocaleString()}₫</div>
      </div>
      <div class="qty">
        <button onclick="changeQty(${index},-1)">−</button>
        <input type="number" value="${item.quantity}" min="1" onchange="updateQty(${index},this.value)">
        <button onclick="changeQty(${index},1)">+</button>
      </div>
      <div class="total-price">${total.toLocaleString()}₫</div>
      <div><button class="remove-btn" onclick="removeItem(${index})">Xóa</button></div>
    `;
    container.appendChild(div);
  });

  document.getElementById("subtotal").innerText=grandTotal.toLocaleString()+"₫";
  document.getElementById("grand-total").innerText=grandTotal.toLocaleString()+"₫";
}

// Thay đổi số lượng
function changeQty(index,delta){
  const cart=JSON.parse(localStorage.getItem("cart"))||[];
  cart[index].quantity+=delta;
  if(cart[index].quantity<1) cart[index].quantity=1;
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

// Cập nhật số lượng từ input
function updateQty(index,value){
  const cart=JSON.parse(localStorage.getItem("cart"))||[];
  cart[index].quantity=parseInt(value)||1;
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

// Xóa sản phẩm
function removeItem(index){
  const cart=JSON.parse(localStorage.getItem("cart"))||[];
  cart.splice(index,1);
  localStorage.setItem("cart",JSON.stringify(cart));
  loadCart();
}

// Load khi mở trang
loadCart();
</script>

</body>
</html>
